<!DOCTYPE html>
<html>
<head>
    <title>Manage Users</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #fff8e1; }
        .card { border: none; background: #fff3cd; }
        h2 { color: #e67e22; }

        /* Buttons */
        .btn-orange { background-color: #e67e22; color: white; border: none; }
        .btn-orange:hover { background-color: #ca6f1e; }

        /* Table Styling */
        .table-custom {
            background-color: #fff8e1;  /* same as body */
            border-radius: 8px;
            overflow: hidden;
        }
        .table-custom th {
            background-color: #e67e22;
            color: white;
            text-align: center;
        }
        .table-custom td {
            background-color: #fff3cd; /* matches card */
            vertical-align: middle;
        }
        .table-custom tr:hover td {
            background-color: #ffe0b2; /* soft highlight on hover */
        }
    </style>
</head>
<body>
      <!-- Header -->
  <nav class="navbar navbar-expand-lg sticky-top" style="background-color: #0d47a1;">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold text-white" href="/">E-Government Portal</a>
      <div class="d-flex align-items-center">
        <a href="/" class="nav-link text-white me-3">Home</a>
        <a href="/help" class="nav-link text-white me-3">Help</a>
        <form action="/logout" method="POST" class="d-inline">
          <button type="submit" class="btn btn-light btn-sm">Logout</button>
        </form>
      </div>
    </div>
  </nav>
  
<div class="container mt-5">
    <div class="card shadow-lg p-4">
        <h2 class="text-center">Manage Users</h2>
        <p class="text-center">Below is a list of all registered users. You can add, edit, or remove them.</p>

        <table class="table table-hover table-bordered mt-3 table-custom">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Department</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% if (users.length > 0) { %>
                    <% users.forEach(u => { %>
                        <tr>
                            <td><%= u.id %></td>
                            <td><%= u.name %></td>
                            <td><%= u.email %></td>
                            <td><%= u.role %></td>
                            <td><%= u.department_name || 'N/A' %></td>
                            <td class="text-center">
                                <a href="/admin/users/edit/<%= u.id %>" class="btn btn-sm btn-warning">Edit</a>
                                <a href="/admin/users/delete/<%= u.id %>" class="btn btn-sm btn-danger">Delete</a>
                            </td>
                        </tr>
                    <% }) %>
                <% } else { %>
                    <tr><td colspan="6" class="text-center">No users found.</td></tr>
                <% } %>
            </tbody>
        </table>

        <div class="text-center mt-3">
            <a href="/admin/users/add" class="btn btn-orange">Add New User</a>
            <a href="/admin_dashboard" class="btn btn-dark">Back</a>
        </div>
    </div>
</div>
</body>
</html>
